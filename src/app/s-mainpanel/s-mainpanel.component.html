<!DOCTYPE html>
<head>
    <title>Departements</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600&amp;subset=cyrillic,latin">
    <link rel="stylesheet" href="../../assets/plugins/bootstrap/css/bootstrap-rtl.min.css">
    <link rel="stylesheet" href="../../assets/css/css-rtl/style-rtl.css">
    <link rel="stylesheet" href="../../assets/css/css-rtl/headers/header-default-rtl.css">
    <link rel="stylesheet" href="../../assets/css/css-rtl/footers/footer-v1-rtl.css">
    <link rel="stylesheet" href="../../assets/plugins/animate.css">
    <link rel="stylesheet" href="../../assets/plugins/line-icons/line-icons.css">
    <link rel="stylesheet" href="../../assets/css/plugins/style-switcher.css">
    <link rel="stylesheet" href="../../assets/css/css-rtl/theme-colors/dark-blue.css" id="style_color">
    <link rel="stylesheet" href="../../assets/css/css-rtl/theme-skins/dark.css">
    <link rel="stylesheet" href="../../assets/css/css-rtl/rtl.css">
    <link rel="stylesheet" href="../../assets/plugins/sky-forms-pro/skyforms/css/sky-forms-rtl.css">
    <link rel="stylesheet" href="../../assets/plugins/sky-forms-pro/skyforms/custom/custom-sky-forms-rtl.css">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  </head>	
<body> 
<div class="wrapper" style="background-image: url('../assets/img/breadcrumbs.png');">   
    <div class="breadcrumbs">
        <div class="container arabparagraph">
            <h1 class="pull-left"><span class="arabtext">المتابعة</span></h1>
        </div>
    </div>
</div>
<div class="container content ">
  <br/><br/>
  <div class="panel">
      <div class="panel-heading">
        <div class="row arabparagraph" >
            <h3 class="panel-title">
                    <button *ngIf="!missdep" style="text-align: right;" (click)="toggleMissDep()" class="btn-u btn-u-lg btn-block btn-u-dark-blue" type="button"><i class="fa fa-chevron-right"></i> <span class="arabparagraph">المأموريات المنجزة من طرف المؤسسة </span> <span class="pull-right"> <i class="fa fa-home"></i></span></button>
                    <button *ngIf="missdep" style="text-align: right;" (click)="toggleMissDep()" class="btn-u btn-u-lg btn-block btn-u-dark-blue" type="button"><i class="fa fa-chevron-down"></i> <span class="arabparagraph">المأموريات المنجزة من طرف المؤسسة </span> <span class="pull-right"> <i class="fa fa-home"></i></span></button>        
            </h3>
        </div>
    </div>
    <div class="arabparagraph" *ngIf="missdep">
    <form   id="sky-form1" class="sky-form " >
        <div class="row">
            <br/>
            <section class="col col-1.5"></section>
            <section class="col col-1.5">
                <p class="arabparagraph">
                        من
                </p> 
            </section>
            <section class="col col-3">
                <label class="input"><i class="icon-prepend fa fa-calendar"></i>
                    <input type="date" #a (change)="chDate()" [(ngModel)]="deball" name="de">
                </label>
            </section>
            <section class="col col-1.5">
                    <p class="arabparagraph">
                            إلى
                    </p> 
                </section>
                <section class="col col-3">
                        <label class="input"><i class="icon-prepend fa fa-calendar"></i>
                            <input type="date" #c [(ngModel)]="finall" (change)="chDate()" name="a">
                        </label>
                </section>   
            <section class="col col-3">
                <button type="button" (click)="print1()" class="btn btn-u"><i class="fa fa-print"></i>  </button>
            </section>
        </div>
    </form>
  </div>
  </div>

  <div class="panel">
        <div class="panel-heading">
          <div class="row arabparagraph" >
              <h3 class="panel-title">
                    <button *ngIf="!distrpays" (click)="distrpays = true"style="text-align: right;" class="btn-u btn-u-lg btn-block btn-u-red" type="button"><i class="fa fa-chevron-right"></i> <span class="arabparagraph">توزيع المأموريات حسب البلدان</span> <span class="pull-right"> <i class="fa fa-list-ol"></i></span></button>
                    <button *ngIf="distrpays" (click)="distrpays = false" style="text-align: right;" class="btn-u btn-u-lg btn-block btn-u-red" type="button"><i class="fa fa-chevron-down"></i> <span class="arabparagraph">توزيع المأموريات حسب البلدان</span> <span class="pull-right"> <i class="fa fa-list-ol"></i></span></button>
                </h3>
          </div>
      </div>
      <div class="arabparagraph" *ngIf="distrpays">
      <form   id="sky-form1" class="sky-form " >
          <div class="row">
              <br/>
              <section class="col col-1.5"></section>
              <section class="col col-1.5">
                  <p class="arabparagraph">
                          من
                  </p> 
              </section>
              <section class="col col-3">
                  <label class="input"><i class="icon-prepend fa fa-calendar"></i>
                      <input type="date" #dd name="de" [(ngModel)]="deb" (change)="cc.value&&dd.value && ff.value?chCountry():return">
                  </label>
              </section>
              <section class="col col-1.5">
                      <p class="arabparagraph">
                              إلى
                      </p> 
                  </section>
                  <section class="col col-3">
                          <label class="input"><i class="icon-prepend fa fa-calendar"></i>
                              <input type="date" #ff name="a"  [(ngModel)]="fin" (change)="cc.value&&dd.value && ff.value?chCountry():return">
                          </label>
                  </section>
                  <section class="col col-1.5">
                        <p class="arabparagraph">
                                البلد
                        </p> 
                    </section>
                    <section class="col col-2">
                            <label class="select">
                                <select name="pays" #cc [(ngModel)]="selectedPays" #p (change)="cc.value&&dd.value && ff.value && p.value?chCountry():return">
                                    <option *ngFor="let p of listPays" [ngValue]="p">{{p.libPaysAr}}</option>
                                </select>
                                <i></i>
                            </label>
                    </section>   
              <section class="col col-2">
                  <button type="button" (click)="showCountries()" class="btn-u btn-u-red"><i class="fa fa-print"></i>  </button>
              </section>
          </div>
      </form>
    </div>
    </div>

    <div class="panel">
            <div class="panel-heading">
              <div class="row arabparagraph" >
                  <h3 class="panel-title">
                        <button *ngIf="!bilan"  (click)="bilan = true" style="text-align: right;" class="btn-u btn-u-lg btn-block btn btn-u-sea" type="button"><i class="fa fa-chevron-right"></i> <span class="arabparagraph">بيان حول استهلاك الإعتمادات</span>  <span class="pull-right"> <i class="fa  fa-list-alt"></i></span></button>
                        <button *ngIf="bilan" (click)="bilan = false" style="text-align: right;" class="btn-u btn-u-lg btn-block btn btn-u-sea" type="button"><i class="fa fa-chevron-down"></i> <span class="arabparagraph">بيان حول استهلاك الإعتمادات</span>  <span class="pull-right"> <i class="fa  fa-list-alt"></i></span></button>
                    </h3>
              </div>
          </div>
          <div class="arabparagraph" *ngIf="bilan">
          <form   id="sky-form1" class="sky-form " >
              <div class="row">
                  <br/>
                  <section class="col col-1.5"></section>
                  <section class="col col-1.5">
                      <p class="arabparagraph">
                            السنة
                      </p> 
                  </section>
                  <section class="col col-3">
                      <label class="select">
                          <select>
                              <option>2018</option>
                          </select><i></i>
                      </label>
                  </section>            
                  <section class="col col-3">
                      <button type="button" class="btn-u btn-u-sea"><i class="fa fa-print"></i> </button>
                  </section>
              </div>
          </form>
        </div>
        </div>

</div> 

<!-- printing tempalte pays + deb + fin-->
<div id="print-section" style="display: none;">
        <p>الجمهورية التونسية
                <br/> {{this.currentDep.libDepAr}}</p>
                <h1 style="text-align:center;">
                المأموريات المنجزة حسب البلد 
                </h1>
                <h3 style="text-align:center;">
                 من {{this.deb}} إلى {{this.fin}}</h3>    
           <h2 style="text-align:center;">
           البلد : {{this.selectedPays.libPaysAr}}
           </h2>
           <table>
                <tr>
                  <th>المأمورية</th>
                  <th>رقم الهوية / المعرف الوحيد</th>
                  <th>الاسم واللقب </th>
                  <th>تاريخ الذهاب</th>
                  <th>تاريخ الإياب</th>
                  <th>المدة</th>
                  <th>موضوع المأمورية</th>
                  <th>مصاريف المأمورية</th>
                  <th>مصاريف النقل</th>
                  <th>مصاريف أخرى</th>
                  <th>الوضعية</th>
                </tr>
               <tr *ngFor="let a of missionsres ">
                    <td>{{a.mission.numMission}}</td>
                    <td>{{a.missionaire.matricule}}</td>
                    <td>{{a.missionaire.nomAr + "  "+ a.missionaire.prenomAr}}</td>
                    <td>{{a.mission.dateDepartP}}</td>
                    <td>{{a.mission.dateArriveP}}</td>
                    <td>{{convDur(a.mission.dateDepartP,a.mission.dateArriveP)}}</td>
                    <td>{{a.mission.objectifMissionAr}}</td>
                    <td ><span *ngFor="let f of a.avoirfrais">{{f.typeFrai.codeTypefr=='0808' && f!=undefined ?f.valeurPrevue :return}}</span></td>
                    <td><span *ngFor="let d of a.avoirfrais">{{d.typeFrai.codeTypefr=='0606' && d!=undefined ?d.valeurPrevue :return}}</span></td>
                    <td *ngIf="missionsres.length > 1"><span *ngFor="let x of a.avoirfrais">{{(x.typeFrai.codeTypefr!='0606' && x.typeFrai.codeTypefr!='0808') && x!=undefined ?x.valeurPrevue :return}}</span></td>
                    <td *ngIf="missionsres.length == 1 || a.length == 0">{{totaldivers}}</td>
                    <td>{{affichageEtat(a.etat)}}</td>

               </tr>
               <tfoot>
                   <tr>
                       <td colspan="12">
                            &nbsp;&nbsp;&nbsp;
                            مجموع المهمات &nbsp;&nbsp; :&nbsp;  {{missionsres.length}} 
                            &nbsp;&nbsp;
                            مجموع عدد الأيام &nbsp;&nbsp; :&nbsp; {{totaljours}}
                            &nbsp;&nbsp;
                            مجموع مصاريف المأموريات &nbsp;:&nbsp; {{totalmiss}} د
                            &nbsp;&nbsp;&nbsp;&nbsp;
                            مجموع المصاريف الأخرى &nbsp;:&nbsp; {{totaldivers}} د
                            &nbsp;&nbsp;
                            مجموع مصاريف النقل &nbsp;&nbsp;:&nbsp; {{totaltransport}} د
                       </td>
                   </tr>
               </tfoot>
            </table>

</div>
<!-- end template pays + deb + fin-->
<!-- begin template deb + fin-->
<div id="dates-only" style="display: none;">
    <p>الجمهورية التونسية
        <br/> {{this.currentDep.libDepAr}}</p>
        <h1 style="text-align:center;">
        المأموريات المنجزة من قبل الهيكل :  
        </h1>
        <h3 style="text-align:center;">
         من {{deball}} إلى {{finall}}
        </h3>    
   <table>
        <tr>
          <th>المأمورية</th>
          <th>بطاقة التعريف</th>
          <th>الاسم واللقب </th>
          <th>موضوع المأمورية</th>
          <th>تاريخ الذهاب</th>
          <th>تاريخ الإياب</th>
          <th>المكان</th>
          <th>المدة</th>
          <th>مصاريف المأمورية</th>
          <th>مصاريف النقل</th>
          <th>مصاريف أخرى</th>
          <th>الوضعية</th>
        </tr>
       <tr *ngFor="let a of mismissionres2 ">
            <td>{{a.mission.numMission}}</td>
            <td>{{a.missionaire.cin}}</td>
            <td>{{a.missionaire.prenomAr + "  "+ a.missionaire.nomAr}}</td>
            <td>{{a.mission.objectifMissionAr}}</td>
            <td>{{a.mission.dateDepartP}}</td>
            <td>{{a.mission.dateArriveP}}</td>
            <td>{{destinations}}</td>
            <td>{{convDur(a.mission.dateDepartP,a.mission.dateArriveP)}}</td>
            <td ><span *ngFor="let f of a.avoirfrais">{{f.typeFrai.codeTypefr=='0808' && f!=undefined ?f.valeurPrevue :return}}</span></td>
            <td><span *ngFor="let d of a.avoirfrais">{{d.typeFrai.codeTypefr=='0606' && d!=undefined ?d.valeurPrevue :return}}</span></td>
            <td *ngIf="mismissionres2.length > 1"><span *ngFor="let x of a.avoirfrais">{{(x.typeFrai.codeTypefr!='0606' && x.typeFrai.codeTypefr!='0808') && x!=undefined ?x.valeurPrevue :return}}</span></td>
            <td *ngIf="mismissionres2.length == 1 || a.length == 0">{{totaldivers}}</td>
            <td>{{affichageEtat(a.etat)}}</td>
       </tr>
       <tfoot>
           <tr>
               <td colspan="12">
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    مجموع المهمات &nbsp;&nbsp;&nbsp; :&nbsp;  {{mismissionres2.length}} 
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    مجموع عدد الأيام &nbsp;&nbsp; :&nbsp; {{totaljours}}
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    مجموع مصاريف المأموريات &nbsp;:&nbsp; {{totalmiss}} د
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    مجموع المصاريف الأخرى &nbsp;:&nbsp; {{totaldivers}} د
                    &nbsp;&nbsp;
                    مجموع مصاريف النقل &nbsp;&nbsp;:&nbsp;&nbsp; {{totaltransport}} د
               </td>
           </tr>
       </tfoot>
    </table>
</div>
<!-- end template deb + fin -->


<!-- End Order Form -->
<!-- JS Global Compulsory -->			
<script src="../../assets/plugins/jquery/jquery.min.js"></script>
<script src="../../assets/plugins/jquery/jquery-migrate.min.js"></script>
<script src="../../assets/plugins/bootstrap/js/bootstrap.min.js"></script>
<!-- JS Implementing Plugins -->
<script src="../../assets/plugins/back-to-top.js"></script>
<script src="../../assets/plugins/smoothScroll.js"></script>
<script src="../../assets/plugins/jquery.parallax.js"></script>
<!-- JS Customization -->
<script src="../../assets/js/custom.js"></script>
<!-- JS Page Level -->           
<script src="../../assets/js/app.js"></script>
<script src="../../assets/js/plugins/style-switcher-rtl.js"></script>
<script>
    jQuery(document).ready(function() {
      	App.init();
        StyleSwitcher.initStyleSwitcher();        
    });
    
</script>
</body>
